<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TLE956x_Lib_doxygen: BLDCM-control.hpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TLE956x_Lib_doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_b85deeec3e940e8ec5637c145ef17ca4.html">corelib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle"><div class="title">BLDCM-control.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/d92/_t_l_e9563_8hpp_source.html">TLE9563.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d05/timer_8hpp_source.html">../pal/timer.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d2c/gpio_8hpp_source.html">../pal/gpio.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/df0/spic_8hpp_source.html">../pal/spic.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d90/adc_8hpp_source.html">../pal/adc.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d67/_b_l_d_c_m-logger_8hpp_source.html">../util/BLDCM-logger.hpp</a>&quot;</code><br />
<code>#include &lt;Arduino.h&gt;</code><br />
</div>
<p><a href="../../d7/da6/_b_l_d_c_m-control_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df7/class_b_l_d_c_mcontrol.html">BLDCMcontrol</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">contains functions to control various types of BLDC motors using a TL9563 SBC  <a href="../../de/df7/class_b_l_d_c_mcontrol.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/daf/struct_b_l_d_c_mcontrol_1_1_b_l_d_c_parameter.html">BLDCMcontrol::BLDCParameter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">BLDCM-control.hpp - Arduino library to control Infineon's BLDC Motor Control Shield with TLE9563</h2></td></tr>
<tr><td class="ititle" colspan="2"><p ><a class="anchor" id="amgrp1fae457215b903245feaf9be5e8d28df"></a>This library includes the basic functions to control a BLDC motor using an instance of TLE9563 tle9563corelib</p>
<dl class="section author"><dt>Author</dt><dd>Infineon Technologies AG </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2020-2021 Infineon Technologies AG </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0.0</dd></dl>
<p>SPDX-License-Identifier: MIT </p>
</td></tr>
<tr class="memitem:a2225243408bba380bad0e4186e969062"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#a2225243408bba380bad0e4186e969062">CONF_TIMEOUT</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:a2225243408bba380bad0e4186e969062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d85db871c4dc1755d56045ab428ef5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#a8d85db871c4dc1755d56045ab428ef5d">CONF_PI_UPDATE_INTERVAL</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a8d85db871c4dc1755d56045ab428ef5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c43e654c22e6208827b4f022534e09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#ab9c43e654c22e6208827b4f022534e09">CONF_RPM_DUTYCYCLE_AT_START</a>&#160;&#160;&#160;80</td></tr>
<tr class="separator:ab9c43e654c22e6208827b4f022534e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7b03881dcd790c46819427d1005999"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#a8e7b03881dcd790c46819427d1005999">CONF_OPEN_LOOP_DUTYCYCLE</a>&#160;&#160;&#160;80</td></tr>
<tr class="separator:a8e7b03881dcd790c46819427d1005999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe087589bb1856a7518863007ab2d26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#affe087589bb1856a7518863007ab2d26">CONF_OPEN_LOOP_DELAY_START</a>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:affe087589bb1856a7518863007ab2d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e960337e2758cf1ad29690ee30d0bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#ae6e960337e2758cf1ad29690ee30d0bb">CONF_OPEN_LOOP_DELAY_LIMIT</a>&#160;&#160;&#160;1200</td></tr>
<tr class="separator:ae6e960337e2758cf1ad29690ee30d0bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae8482d32a1cf985bac2400756451815"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#aae8482d32a1cf985bac2400756451815">CONF_OPEN_LOOP_DELAY_SLOPE</a>&#160;&#160;&#160;200</td></tr>
<tr class="separator:aae8482d32a1cf985bac2400756451815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c3f05d4bcf0c4c0f74bc4c011210de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#a12c3f05d4bcf0c4c0f74bc4c011210de">CONF_DUTYCYCLE_TOP_LIMIT</a>&#160;&#160;&#160;255</td></tr>
<tr class="separator:a12c3f05d4bcf0c4c0f74bc4c011210de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a933061f5184bec107a47325994e724"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da6/_b_l_d_c_m-control_8hpp.html#a0a933061f5184bec107a47325994e724">CONF_DUTYCYCLE_BOTTOM_LIMIT</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a0a933061f5184bec107a47325994e724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c455c4ea9b9695ad43c08251431640"><td class="memItemLeft" align="right" valign="top"><a id="a67c455c4ea9b9695ad43c08251431640" name="a67c455c4ea9b9695ad43c08251431640"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SHUNT_RESISTOR_VALUE</b>&#160;&#160;&#160;0.005</td></tr>
<tr class="separator:a67c455c4ea9b9695ad43c08251431640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f7faf419bb35a2d270bdafbb358a88"><td class="memItemLeft" align="right" valign="top"><a id="a12f7faf419bb35a2d270bdafbb358a88" name="a12f7faf419bb35a2d270bdafbb358a88"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BRAKEMODE_PASSIVE</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a12f7faf419bb35a2d270bdafbb358a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab38952ded216a87e8c254df319b8851d"><td class="memItemLeft" align="right" valign="top"><a id="ab38952ded216a87e8c254df319b8851d" name="ab38952ded216a87e8c254df319b8851d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BRAKEMODE_ACTIVE</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ab38952ded216a87e8c254df319b8851d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0515a3d3adc6090423ddf8298db3d075"><td class="memItemLeft" align="right" valign="top"><a id="a0515a3d3adc6090423ddf8298db3d075" name="a0515a3d3adc6090423ddf8298db3d075"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>_Halfbridges</b> { <br />
&#160;&#160;<b>PHASE1</b>
, <b>PHASE2</b>
, <b>PHASE3</b>
, <b>PHASE1</b>
, <br />
&#160;&#160;<b>PHASE2</b>
, <b>PHASE3</b>
, <b>PHASE4</b>
<br />
 }</td></tr>
<tr class="separator:a0515a3d3adc6090423ddf8298db3d075"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a0a933061f5184bec107a47325994e724" name="a0a933061f5184bec107a47325994e724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a933061f5184bec107a47325994e724">&#9670;&nbsp;</a></span>CONF_DUTYCYCLE_BOTTOM_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_DUTYCYCLE_BOTTOM_LIMIT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >minimum dutycycle, below the motor won't turn anymore </p>

</div>
</div>
<a id="a12c3f05d4bcf0c4c0f74bc4c011210de" name="a12c3f05d4bcf0c4c0f74bc4c011210de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c3f05d4bcf0c4c0f74bc4c011210de">&#9670;&nbsp;</a></span>CONF_DUTYCYCLE_TOP_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_DUTYCYCLE_TOP_LIMIT&#160;&#160;&#160;255</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >maximum dutycycle </p>

</div>
</div>
<a id="ae6e960337e2758cf1ad29690ee30d0bb" name="ae6e960337e2758cf1ad29690ee30d0bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6e960337e2758cf1ad29690ee30d0bb">&#9670;&nbsp;</a></span>CONF_OPEN_LOOP_DELAY_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_OPEN_LOOP_DELAY_LIMIT&#160;&#160;&#160;1200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >microseconds. The smallest delay that is used before open loop commutation turns into closed loop </p>

</div>
</div>
<a id="aae8482d32a1cf985bac2400756451815" name="aae8482d32a1cf985bac2400756451815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8482d32a1cf985bac2400756451815">&#9670;&nbsp;</a></span>CONF_OPEN_LOOP_DELAY_SLOPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_OPEN_LOOP_DELAY_SLOPE&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >microseconds. The amount CONF_OPEN_LOOP_DELAY_START will be decreased every open loop commutation. You can calculate the amount: O_L_commutations = (5000-1200)/200 </p>

</div>
</div>
<a id="affe087589bb1856a7518863007ab2d26" name="affe087589bb1856a7518863007ab2d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affe087589bb1856a7518863007ab2d26">&#9670;&nbsp;</a></span>CONF_OPEN_LOOP_DELAY_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_OPEN_LOOP_DELAY_START&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >microseconds. This is the delay between the first commutations when starting a BLDC motor </p>

</div>
</div>
<a id="a8e7b03881dcd790c46819427d1005999" name="a8e7b03881dcd790c46819427d1005999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7b03881dcd790c46819427d1005999">&#9670;&nbsp;</a></span>CONF_OPEN_LOOP_DUTYCYCLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_OPEN_LOOP_DUTYCYCLE&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >dutycycle for blind commutation at motor start (open loop) </p>

</div>
</div>
<a id="a8d85db871c4dc1755d56045ab428ef5d" name="a8d85db871c4dc1755d56045ab428ef5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d85db871c4dc1755d56045ab428ef5d">&#9670;&nbsp;</a></span>CONF_PI_UPDATE_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_PI_UPDATE_INTERVAL&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >milliseconds. How often should the PI regulator be called. Affects precision if too low. </p>

</div>
</div>
<a id="ab9c43e654c22e6208827b4f022534e09" name="ab9c43e654c22e6208827b4f022534e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9c43e654c22e6208827b4f022534e09">&#9670;&nbsp;</a></span>CONF_RPM_DUTYCYCLE_AT_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_RPM_DUTYCYCLE_AT_START&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >dutycycle when motor starts to turn before RPM controller will be switched on </p>

</div>
</div>
<a id="a2225243408bba380bad0e4186e969062" name="a2225243408bba380bad0e4186e969062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2225243408bba380bad0e4186e969062">&#9670;&nbsp;</a></span>CONF_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONF_TIMEOUT&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Main place to configure BLDC motor parameters. All defines beginning with "CONF_" are intended to be changed by the user. All other defines should remain as they are. milliseconds. How long no commutation may occur until it can be assumed, the motor got stuck </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
